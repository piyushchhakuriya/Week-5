<!DOCTYPE html>
<html>

  <head>
	<style>
	  div {
	  	display: inline-block;
			outline: 1 solid black;
			padding: 0.25em;
			width: 5em;
			height: 1em;
		}
		.theme {
			margin: 1em;
		}
	</style>
  </head>
  <body>
    <input type="color" name="base-color" value="#4682B4">
    <select name="color-scheme">
      <option value="triad">Triadic</option>
      <option value="tetrad">Tetrad</option>
      <option value="analogous">Analogous</option>
      <option value="monochromatic">Monochromatic</option>
      <option value="splitcomplement">Splitcomplement</option>
    </select>
    <div class="theme">
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
      <div class="color member"><span class="code"></span></div>
    </div>

  	<script src="./chromath.js"></script>
  	<script>
      var members = qsa('.theme .member');

      var inputEl = qs('input');
      var baseColor = inputEl.value;
      inputEl.addEventListener('change', onColorChange);

      var schemeEl = qs('select');
      var scheme = schemeEl.value;
      schemeEl.addEventListener('change', onSchemeChange)

      function qs(selector, el) {
        return qsa(selector, el)[0];
      }

      function qsa(selector, el){
        if (!el) el = document;
        return [].slice.call(el.querySelectorAll(selector));
      }

      function onColorChange(event) {
        baseColor = this.value;
        updateTheme();
      }

      function onSchemeChange(event) {
        scheme = this.value;
        updateTheme();
      }

      function clearTheme(){
        members.forEach(function (el) {
          setBackgroundColor(el, 'transparent');
          setColorText(el, '');
        });
      }

      function updateTheme(colors){
        if (!colors) colors = Chromath[scheme](baseColor)
        clearTheme();
        [].concat(colors).forEach(function (color, i){
          var member = members[i];
          setBackgroundColor(member, color);
          setColorText(member, color);
        });
      }

      function setBackgroundColor(el, color) {
        el.style.backgroundColor = color;
      }

      function setColorText(el, text) {
        var codeEl = qs('.code', el);
        codeEl.innerText = text;
        codeEl.style.color = '#D3D3D3';
      }
  	</script>
  </body>

</html>
